<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title> Home Webpage </title>
    <style>
      @import url(indexStyles.css);
    </style>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const header = document.querySelector('.fixed-header');
        // Function to add or remove the 'fixed' class based on scroll position
        function toggleFixedHeader() {
          if (window.scrollY > header.offsetTop) {
            header.classList.add('fixed');
          } else {
            header.classList.remove('fixed');
          }
        }
        // Listen for the scroll event and call the toggleFixedHeader function
        window.addEventListener('scroll', toggleFixedHeader);
      });
    </script>
  </head>
  <body>
    <header class="fixed-header">
      <!-- nav and ul elements used for formatting organization -->
      <nav>
        <div>
          <a href="index.html" class="btn btn-primary mr-2 mb-2"> Home </a>
          <a href="forum.html" class="btn btn-primary mr-2 mb-2"> Forum </a>
          <a href="meetup.html" class="btn btn-primary mr-2 mb-2"> Meetup Forum </a>
          <a href="videopage.html" class="btn btn-primary mr-2 mb-2"> Video Library </a>
          <a href="dashboard.html" class="btn btn-primary mr-2 mb-2"> Progress Dashboard </a>
          <a href="article_library.html" class="btn btn-primary mr-2 mb-2"> Article Library </a>
          <a href="DailyInteractive/dailyInteractive.html" class="btn btn-primary mr-2 mb-2"> Daily Interactive </a>
          <a href="relaxation-sounds.html" class="btn btn-primary mr-2 mb-2"> Relaxation Sounds Library </a>
          <a href="MeditationSession.html" class="btn btn-primary mr-2 mb-2"> Meditation Sessions </a>
          <a href="timersPage.html" class="btn btn-primary mr-2 mb-2"> Timers </a>
        </div>
      </nav>
    </header>
    <div class="user-button-container" style="text-align: right; padding-right: 20px; padding-top: 80px;">
      <!-- Adjust the value of padding-top -->
      <button id="leftButton" class="btn btn-primary btn-lg"> Sign Up </button>
      <button id="rightButton" class="btn btn-secondary btn-lg"> Login </button>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const leftButton = document.getElementById('leftButton');
        const rightButton = document.getElementById('rightButton');
        fetch('/api/username').then(response = > response.json()).then(data = > {
          if (data.username) {
            leftButton.textContent = 'Account';
            leftButton.onclick = function() {
              window.location.href = '/account';
            };
            // Dynamically use the username in the 'Sign Out' button text
            rightButton.textContent = `Sign Out of $ {
              data.username
            }`;
            rightButton.onclick = function() {
              window.location.href = '/signout';
            };
          } else {
            leftButton.textContent = 'Sign Up';
            leftButton.onclick = function() {
              window.location.href = '/signup';
            };
            rightButton.textContent = 'Login';
            rightButton.onclick = function() {
              window.location.href = '/login';
            };
          }
        }).
        catch(error = > {
          console.error("Error fetching username:", error);
          leftButton.textContent = 'Sign Up';
          leftButton.onclick = function() {
            window.location.href = '/signup';
          };
          rightButton.textContent = 'Login';
          rightButton.onclick = function() {
            window.location.href = '/login';
          };
        });
      });
    </script>
  </body>
</html>